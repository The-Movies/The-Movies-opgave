<UserControl x:Class="The_movie_egen.UI.View.CinemasView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Loaded="CinemasView_Loaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <!-- Side-overskrift -->
        <TextBlock Text="Biografer &amp; sale"
                   Foreground="{StaticResource Brush.Text}"
                   FontSize="18" FontWeight="Bold"
                   Margin="0,0,0,12"/>

        <!-- Test TextBlock -->
        <TextBlock Grid.Row="1" 
                   Text="{Binding Cinemas.Count, StringFormat='Antal biografer: {0}'}"
                   Foreground="Red"
                   FontSize="14"
                   Margin="0,0,0,8"/>

        <!-- Knapper til at administrere sale -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,16">
            <Button Content="Tilføj ny sal" 
                    Command="{Binding AddAuditoriumCommand}"
                    Background="{StaticResource Brush.Primary}"
                    Foreground="White"
                    BorderBrush="{StaticResource Brush.Primary}"
                    Padding="12,6" Margin="0,0,8,0"/>
            
            <Button Content="Rediger sal" 
                    Command="{Binding EditAuditoriumCommand}"
                    Background="{StaticResource Brush.Surface2}"
                    Foreground="{StaticResource Brush.Text}"
                    BorderBrush="{StaticResource Brush.Border}"
                    Padding="12,6" Margin="0,0,8,0"/>
            
            <Button Content="Slet sal" 
                    Command="{Binding DeleteAuditoriumCommand}"
                    Background="{StaticResource Brush.Surface2}"
                    Foreground="{StaticResource Brush.Text}"
                    BorderBrush="{StaticResource Brush.Border}"
                    Padding="12,6"/>
        </StackPanel>

        <!-- Simpel liste over biografer og deres sale -->
        <ScrollViewer Grid.Row="3">
            <ItemsControl ItemsSource="{Binding Cinemas}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource SurfaceCard}" Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="{Binding Name}"
                                           Foreground="{StaticResource Brush.Text}"
                                           FontSize="16" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding City}"
                                           Foreground="{StaticResource Brush.TextMuted}"
                                           Margin="0,2,0,8"/>

                                <ItemsControl ItemsSource="{Binding Auditoriums}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{StaticResource Brush.Surface2}"
                                                    CornerRadius="8" Padding="10" Margin="0,0,0,8"
                                                    BorderBrush="{StaticResource Brush.Border}" BorderThickness="1"
                                                    MouseLeftButtonDown="Auditorium_MouseLeftButtonDown"
                                                    Cursor="Hand">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding DataContext.SelectedAuditorium, RelativeSource={RelativeSource AncestorType=UserControl}}" Value="{Binding}">
                                                                <Setter Property="Background" Value="{StaticResource Brush.Primary}"/>
                                                                <Setter Property="BorderBrush" Value="{StaticResource Brush.Primary}"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Text="{Binding Name}"
                                                               Foreground="{StaticResource Brush.Text}" />
                                                    <TextBlock Grid.Column="1"
                                                               Text="{Binding Seats, StringFormat=Pladser: {0}}"
                                                               Foreground="{StaticResource Brush.TextMuted}" />
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>
